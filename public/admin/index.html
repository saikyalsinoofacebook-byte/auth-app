<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Arthur Game Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Admin Header -->
    <nav class="admin-navbar">
        <div class="container-fluid">
            <div class="navbar-brand">
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                    <i class="bi bi-list"></i>
                </button>
                <i class="bi bi-shield-check"></i>
                <span>Admin Panel</span>
            </div>
            <div class="navbar-actions">
                <button class="btn btn-outline-light" onclick="logout()">
                    <i class="bi bi-box-arrow-right"></i> <span class="d-none d-md-inline">Logout</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" onclick="closeMobileMenu()"></div>

    <div class="admin-container">
        <!-- Sidebar -->
        <div class="admin-sidebar" id="adminSidebar">
            <div class="sidebar-header">
                <h5><i class="bi bi-person-circle"></i> Admin Dashboard</h5>
                <button class="mobile-close-btn" onclick="closeMobileMenu()">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-item active" data-page="dashboard">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </li>
                <li class="menu-item" data-page="users">
                    <i class="bi bi-people"></i>
                    <span>Users</span>
                </li>
                <li class="menu-item" data-page="orders">
                    <i class="bi bi-bag"></i>
                    <span>Orders</span>
                </li>
                <li class="menu-item" data-page="transactions">
                    <i class="bi bi-credit-card"></i>
                    <span>Transactions</span>
                </li>
                <li class="menu-item" data-page="wallet">
                    <i class="bi bi-wallet2"></i>
                    <span>Wallet Management</span>
                </li>
                <li class="menu-item" data-page="gifts">
                    <i class="bi bi-gift"></i>
                    <span>Gift System</span>
                </li>
                <li class="menu-item" data-page="settings">
                    <i class="bi bi-gear"></i>
                    <span>Settings</span>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="admin-main">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page-content active">
                <div class="page-header">
                    <h2><i class="bi bi-speedometer2"></i> Dashboard Overview</h2>
                    <p>Welcome to Arthur Game Shop Admin Panel</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="bi bi-people"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-users">0</h3>
                            <p>Total Users</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="bi bi-bag"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-orders">0</h3>
                            <p>Total Orders</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="bi bi-credit-card"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-revenue">0.00</h3>
                            <p>Total Revenue (Ks)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="bi bi-clock-history"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="pending-orders">0</h3>
                            <p>Pending Orders</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="dashboard-section">
                    <h4><i class="bi bi-clock-history"></i> Recent Activity</h4>
                    <div class="activity-list" id="recent-activity">
                        <div class="activity-item">
                            <div class="activity-icon transaction">
                                <i class="bi bi-arrow-down-circle"></i>
                            </div>
                            <div class="activity-content">
                                <h6>System initialized</h6>
                                <p>Loading activities...</p>
                            </div>
                            <div class="activity-time">
                                Just now
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Page -->
            <div id="users-page" class="page-content">
                <div class="page-header">
                    <h2><i class="bi bi-people"></i> User Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-outline-secondary" onclick="exportUsers()">
                            <i class="bi bi-download"></i> Export
                        </button>
                        <button class="btn btn-primary" onclick="loadUsers()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <!-- User Search and Filters -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <div class="input-group">
                            <input type="text" class="form-control" id="user-search" placeholder="Search users..." onkeyup="filterUsers()">
                            <button class="btn btn-outline-secondary" type="button">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" id="user-sort">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="balance-high">Balance: High to Low</option>
                            <option value="balance-low">Balance: Low to High</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" id="user-filter">
                            <option value="all">All Users</option>
                            <option value="with-balance">With Balance</option>
                            <option value="no-balance">No Balance</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Balance (Ks)</th>
                                    <th>Tokens</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-table">
                                <tr>
                                    <td colspan="7" class="text-center">
                                        <div class="loading"></div>
                                        Loading users...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Pagination -->
                <nav aria-label="User pagination">
                    <ul class="pagination justify-content-center" id="users-pagination">
                        <li class="page-item disabled">
                            <a class="page-link" href="#">Previous</a>
                        </li>
                        <li class="page-item active">
                            <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Orders Page -->
            <div id="orders-page" class="page-content">
                <div class="page-header">
                    <h2><i class="bi bi-bag"></i> Order Management</h2>
                    <div class="header-actions">
                        <select class="form-select" id="order-status-filter">
                            <option value="">All Status</option>
                            <option value="Pending">Pending</option>
                            <option value="Completed">Completed</option>
                            <option value="Cancelled">Cancelled</option>
                            <option value="Processing">Processing</option>
                        </select>
                        <button class="btn btn-outline-secondary" onclick="exportOrders()">
                            <i class="bi bi-download"></i> Export
                        </button>
                        <button class="btn btn-primary" onclick="loadOrders()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Date Filter -->
                <div class="row mb-3">
                    <div class="col-md-4">
                        <label>From Date</label>
                        <input type="date" class="form-control" id="order-date-from">
                    </div>
                    <div class="col-md-4">
                        <label>To Date</label>
                        <input type="date" class="form-control" id="order-date-to">
                    </div>
                    <div class="col-md-4">
                        <label>Search</label>
                        <input type="text" class="form-control" id="order-search" placeholder="Search orders...">
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>User Email</th>
                                    <th>Item Details</th>
                                    <th>Price (Ks)</th>
                                    <th>Status</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="orders-table">
                                <tr>
                                    <td colspan="7" class="text-center">
                                        <div class="loading"></div>
                                        Loading orders...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Transactions Page -->
            <div id="transactions-page" class="page-content">
                <div class="page-header">
                    <h2><i class="bi bi-credit-card"></i> Transaction Management</h2>
                    <div class="header-actions">
                        <select class="form-select" id="transaction-type-filter">
                            <option value="">All Types</option>
                            <option value="deposit">Deposit</option>
                            <option value="withdraw">Withdraw</option>
                            <option value="order">Order Payment</option>
                            <option value="gift">Gift Prize</option>
                            <option value="refund">Refund</option>
                        </select>
                        <select class="form-select" id="transaction-status-filter">
                            <option value="">All Status</option>
                            <option value="Pending">Pending</option>
                            <option value="Completed">Completed</option>
                            <option value="Cancelled">Cancelled</option>
                            <option value="Failed">Failed</option>
                        </select>
                        <button class="btn btn-outline-secondary" onclick="exportTransactions()">
                            <i class="bi bi-download"></i> Export
                        </button>
                        <button class="btn btn-primary" onclick="loadTransactions()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Transaction Filters -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label>Min Amount</label>
                        <input type="number" class="form-control" id="transaction-min-amount" placeholder="Min amount">
                    </div>
                    <div class="col-md-3">
                        <label>Max Amount</label>
                        <input type="number" class="form-control" id="transaction-max-amount" placeholder="Max amount">
                    </div>
                    <div class="col-md-3">
                        <label>From Date</label>
                        <input type="date" class="form-control" id="transaction-date-from">
                    </div>
                    <div class="col-md-3">
                        <label>To Date</label>
                        <input type="date" class="form-control" id="transaction-date-to">
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Type</th>
                                    <th>Amount (Ks)</th>
                                    <th>Status</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-table">
                                <tr>
                                    <td colspan="7" class="text-center">
                                        <div class="loading"></div>
                                        Loading transactions...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Wallet Management Page -->
            <div id="wallet-page" class="page-content">
                <div class="page-header">
                    <h2><i class="bi bi-wallet2"></i> Wallet Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-outline-success" onclick="showBulkAddFunds()">
                            <i class="bi bi-plus-circle"></i> Bulk Add Funds
                        </button>
                        <button class="btn btn-primary" onclick="loadWallets()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Wallet Summary -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <div class="card text-white bg-primary mb-3">
                            <div class="card-body">
                                <h6 class="card-title">Total Balance</h6>
                                <h3 id="total-wallet-balance">0 Ks</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-white bg-success mb-3">
                            <div class="card-body">
                                <h6 class="card-title">Available Balance</h6>
                                <h3 id="total-available-balance">0 Ks</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-white bg-warning mb-3">
                            <div class="card-body">
                                <h6 class="card-title">On Hold Balance</h6>
                                <h3 id="total-onhold-balance">0 Ks</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-white bg-info mb-3">
                            <div class="card-body">
                                <h6 class="card-title">Total Tokens</h6>
                                <h3 id="total-tokens">0</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Total Balance (Ks)</th>
                                    <th>Available (Ks)</th>
                                    <th>On Hold (Ks)</th>
                                    <th>Tokens</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="wallets-table">
                                <tr>
                                    <td colspan="6" class="text-center">
                                        <div class="loading"></div>
                                        Loading wallets...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Gift System Page -->
            <div id="gifts-page" class="page-content">
                <div class="page-header">
                    <h2><i class="bi bi-gift"></i> Gift System Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-outline-info" onclick="showGiftStats()">
                            <i class="bi bi-graph-up"></i> Statistics
                        </button>
                        <button class="btn btn-primary" onclick="loadGifts()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <div class="gift-stats">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #8b5cf6;">
                            <i class="bi bi-arrow-repeat"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-spins">0</h3>
                            <p>Total Spins Today</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #06b6d4;">
                            <i class="bi bi-coin"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-tokens-used">0</h3>
                            <p>Tokens Used Today</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #10b981;">
                            <i class="bi bi-cash-coin"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-prizes-won">0 Ks</h3>
                            <p>Prizes Won Today</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #f59e0b;">
                            <i class="bi bi-trophy"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="biggest-prize">0 Ks</h3>
                            <p>Biggest Prize Today</p>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>User Email</th>
                                    <th>Prize</th>
                                    <th>Amount (Ks)</th>
                                    <th>Status</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="gifts-table">
                                <tr>
                                    <td colspan="6" class="text-center">
                                        <div class="loading"></div>
                                        Loading gift transactions...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings-page" class="page-content">
                <div class="page-header">
                    <h2><i class="bi bi-gear"></i> System Settings</h2>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="settings-section">
                            <h4><i class="bi bi-gift"></i> Gift System Settings</h4>
                            <div class="form-group">
                                <label>Free Token Interval (hours)</label>
                                <input type="number" class="form-control" id="free-token-interval" value="24" min="1" max="168">
                                <small class="text-muted">Time between free token claims</small>
                            </div>
                            <div class="form-group">
                                <label>Token Price (Ks)</label>
                                <input type="number" class="form-control" id="token-price" value="500" min="100" step="100">
                                <small class="text-muted">Price for purchasing additional tokens</small>
                            </div>
                            <div class="form-group">
                                <label>Max Tokens Per User</label>
                                <input type="number" class="form-control" id="max-tokens" value="10" min="1" max="100">
                                <small class="text-muted">Maximum tokens a user can hold</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="settings-section">
                            <h4><i class="bi bi-wallet2"></i> Wallet Settings</h4>
                            <div class="form-group">
                                <label>Minimum Deposit (Ks)</label>
                                <input type="number" class="form-control" id="min-deposit" value="1000" min="100" step="100">
                                <small class="text-muted">Minimum amount for deposits</small>
                            </div>
                            <div class="form-group">
                                <label>Maximum Deposit (Ks)</label>
                                <input type="number" class="form-control" id="max-deposit" value="1000000" min="1000" step="1000">
                                <small class="text-muted">Maximum amount for deposits</small>
                            </div>
                            <div class="form-group">
                                <label>Minimum Withdrawal (Ks)</label>
                                <input type="number" class="form-control" id="min-withdrawal" value="5000" min="1000" step="1000">
                                <small class="text-muted">Minimum amount for withdrawals</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-12">
                        <div class="settings-section">
                            <h4><i class="bi bi-shield-check"></i> Security Settings</h4>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="enable-2fa" checked>
                                <label class="form-check-label" for="enable-2fa">Enable Two-Factor Authentication</label>
                            </div>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="enable-logging" checked>
                                <label class="form-check-label" for="enable-logging">Enable Activity Logging</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="auto-logout" checked>
                                <label class="form-check-label" for="auto-logout">Auto Logout (30 minutes inactivity)</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-12 text-center">
                        <button class="btn btn-primary btn-lg" onclick="saveSettings()">
                            <i class="bi bi-check-circle"></i> Save All Settings
                        </button>
                        <button class="btn btn-outline-secondary btn-lg ms-2" onclick="resetSettings()">
                            <i class="bi bi-arrow-clockwise"></i> Reset to Default
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal fade" id="actionModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Action</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Dynamic content -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="modalConfirm">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Processing...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="admin.js"></script>
    
    <script>
        // Authentication check and initialization
        document.addEventListener('DOMContentLoaded', function() {
            const adminToken = localStorage.getItem('adminToken');
            if (!adminToken) {
                window.location.href = 'login.html';
                return;
            }
            
            // Verify token with better error handling
            verifyAdminToken(adminToken).then(isValid => {
                if (!isValid) {
                    localStorage.removeItem('adminToken');
                    window.location.href = 'login.html';
                    return;
                }
                
                // Initialize admin panel after successful authentication
                console.log('Admin authenticated successfully');
                initializeAdminPanel();
                
            }).catch(error => {
                console.error('Authentication error:', error);
                localStorage.removeItem('adminToken');
                window.location.href = 'login.html';
            });
        });

        // Enhanced token verification function
        async function verifyAdminToken(token) {
            try {
                const response = await fetch('https://arthur-game-shop.onrender.com/api/admin/verify', {
                    method: 'GET',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    timeout: 10000 // 10 second timeout
                });
                
                if (!response.ok) {
                    if (response.status === 401 || response.status === 403) {
                        return false;
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                return data.valid === true || data.success === true;
                
            } catch (error) {
                console.error('Token verification failed:', error);
                return false;
            }
        }

        // Show loading overlay
        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        // Hide loading overlay
        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        // Export functions (placeholder implementations)
        function exportUsers() {
            showLoading();
            setTimeout(() => {
                hideLoading();
                alert('User export feature will be implemented soon');
            }, 1000);
        }

        function exportOrders() {
            showLoading();
            setTimeout(() => {
                hideLoading();
                alert('Order export feature will be implemented soon');
            }, 1000);
        }

        function exportTransactions() {
            showLoading();
            setTimeout(() => {
                hideLoading();
                alert('Transaction export feature will be implemented soon');
            }, 1000);
        }

        // Filter functions (placeholder implementations)
        function filterUsers() {
            const searchTerm = document.getElementById('user-search').value.toLowerCase();
            const rows = document.querySelectorAll('#users-table tr');
            
            rows.forEach(row => {
                if (row.querySelector('td')) {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(searchTerm) ? '' : 'none';
                }
            });
        }

        // Bulk operations (placeholder implementations)
        function showBulkAddFunds() {
            alert('Bulk add funds feature will be implemented soon');
        }

        function showGiftStats() {
            alert('Gift statistics feature will be implemented soon');
        }

        // Settings functions (placeholder implementations)
        function resetSettings() {
            if (confirm('Are you sure you want to reset all settings to default?')) {
                document.getElementById('free-token-interval').value = '24';
                document.getElementById('token-price').value = '500';
                document.getElementById('max-tokens').value = '10';
                document.getElementById('min-deposit').value = '1000';
                document.getElementById('max-deposit').value = '1000000';
                document.getElementById('min-withdrawal').value = '5000';
                alert('Settings reset to default values');
            }
        }

        // Auto-logout for inactivity
        let inactivityTimer;
        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
                if (document.getElementById('auto-logout')?.checked) {
                    alert('Session expired due to inactivity');
                    logout();
                }
            }, 30 * 60 * 1000); // 30 minutes
        }

        // Reset timer on user activity
        document.addEventListener('mousemove', resetInactivityTimer);
        document.addEventListener('keypress', resetInactivityTimer);
        resetInactivityTimer();
    </script>
    
    <style>
        /* Additional styles for new elements */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .form-switch .form-check-input {
            width: 3em;
            height: 1.5em;
        }
        
        .table-responsive {
            border-radius: 10px;
            overflow: hidden;
        }
        
        .pagination {
            margin: 1rem 0;
        }
        
        .page-item.active .page-link {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-color: #3b82f6;
        }
    </style>
</body>
</html>